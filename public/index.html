<!doctype html>
<html lang="ja" ng-app="app">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Link Checker</title>
<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Michroma">
<link rel="stylesheet" href="css/style.css">
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
<script src="js/app.js"></script>
</head>
<body ng-controller="AppController">
<nav class="navbar navbar-default navbar-fixed-top">
	<div class="container">
		<div class="navbar-header"><a href="/" class="navbar-brand">Bridges</a></div>
	</div>
</nav>
<div id="page_1" class="page-1" ng-show="!Website.top">
	<div class="container">
		<div class="box">
			<h1>Bridges</h1>
			<form name="checker" ng-submit="Website.check(query)" class="row" novalidate>
				<p><input type="url" name="url" ng-model="query" placeholder="http://www.example.com/" required></p>
				<p><input type="submit" value="Check !!" class="btn-start" ng-disabled="checker.$invalid"></p>
			</form>
		</div>
	</div>
</div>
<div id="page_2" class="page-2" ng-show="Website.top" ng-hide="Website.complete">
	<div class="box">
		<div class="container" ng-show="Website.pages[Website.current].url">
			<p class="alert alert-info" ng-show="Website.message">{{Website.message}}</p>
			<div class="row">
				<div class="col-md-6">
					<p><img src="http://capture.heartrails.com/400x300?{{Website.pages[Website.current].url}}" alt="{{Website.pages[Website.current].url}}"></p>
				</div>
				<div class="col-md-6">
					<p>
						サイト内に <strong>{{Website.pages.length | number}}</strong> ページを検出<br>
						全部で <strong>{{Website.cache.length | number}}</strong> のURLを調査済み
					</p>
				</div>
			</div>
		</div>
		<div class="container" ng-show="Website.complete">
			<p>Completed</p>
		</div>
	</div>
</div>
<div id="page_3" class="page-3" ng-show="Website.complete">
	<div class="container">
		<div ng-show="Website.pages.length" ng-repeat="page in Website.pages">
			<h2>
				{{page.url}}<br>
				<small ng-if="page.enabled == null">Searching ...</small>
				<small ng-if="page.enabled == true">{{page.inner.length}} URLs included.</small>
				<small ng-if="page.enabled == false">Disconnected.</small>
			</h2>
			<div class="row">
				<div class="col-md-3">
					<img src="http://capture.heartrails.com/400x300?{{page.url}}" alt="{{page.url}}">
				</div>
				<div class="col-md-9">
					<table class="table" ng-if="page.enabled">
						<thead>
							<tr>
								<th>No.</th>
								<th>URL</th>
								<th>Enabled</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="innerPage in page.inner">
								<td>{{$index + 1}}</td>
								<td><a href="{{innerPage.url}}" target="_blank">{{innerPage.url}}</a></td>
								<td ng-if="innerPage.enabled == null"><span class="text-muted">Checking ...</span></td>
								<td ng-if="innerPage.enabled == true"><span class="label label-success">OK.</span></td>
								<td ng-if="innerPage.enabled == false"><span class="label label-danger">NG!</span></td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
</div>
<footer class="footer">
	<small>&copy; 2015 Yosuke Tanaka.</small>
</footer>
</body>
</html>
